(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{41:function(e,t,a){},63:function(e,t,a){},68:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r=a(72),n=a(28),s=a(29),o=a(39),c=a(30),i=a(40),l=a(0),m=a.n(l),u=a(71),p=(a(41),a(9)),d=a(42),g=a.n(d),h=a(44),f=a(12),k=a(45),v=a.n(k),N=(a(63),a(64)),E=a.n(N),b=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{key:this.props.index,className:"vertical"},m.a.createElement("h3",null,this.props.index+1),m.a.createElement("div",{className:"app-img"},m.a.createElement("img",{className:(this.props.index+1)%2===0?"even":"odd",src:this.props.artworkUrl100,alt:this.props.trackName})),m.a.createElement("div",{className:"app-info"},m.a.createElement("div",{className:"app-name"},this.props.trackName),m.a.createElement("div",{className:"genres"},this.props.genres),m.a.createElement("div",{className:"app-rating"},m.a.createElement(E.a,{rating:this.props.averageUserRating,starDimension:"15px",starSpacing:"1px",starRatedColor:"rgb(254,149,0)",starEmptyColor:"rgb(250,250,255)"}),m.a.createElement("div",{className:"count"},this.props.userRatingCount?"(".concat(this.props.userRatingCount,")"):"(0)"))))}}]),t}(m.a.Component),w=(a(68),function(e){return m.a.createElement("div",{className:"top-grossing"},m.a.createElement("div",{index:e.index,className:"horizontal"},m.a.createElement("img",{className:"image",src:e.artworkUrl100,alt:e.trackName}),m.a.createElement("div",{className:"app-name"},e.trackName),m.a.createElement("div",{className:"genre"},e.genres)))}),C=a(70),x=a(69),j=a(13),O=a.n(j),U=Object(p.b)(function(e){return{topFree:e.app.topFree}},null)(function(e){var t=e.items,a=e.loadMoreItems,r=e.hasNextPage,n=function(e){return!r||e<t.length},s=function(e){var a=e.index;return m.a.createElement("div",null,n(a)?t.map(function(e,t){return m.a.createElement(b,{key:t,index:t,artworkUrl100:e.artworkUrl100,trackName:e.trackName,genres:e.genres,averageUserRating:e.averageUserRating,userRatingCount:e.userRatingCount})}):m.a.createElement("img",{id:"loading-app",src:O.a,alt:"loading..."}))},o=r?t.length+1:t.length;return m.a.createElement(x.a,{isItemLoaded:n,itemCount:o,loadMoreItems:a},function(e){var t=e.onItemsRendered,a=e.ref;return m.a.createElement(C.a,{height:450,itemSize:30,itemCount:o,onItemsRendered:t,ref:a},s)})}),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).loadMore=function(){var e=a.state.currentCount+a.state.offset;a.setState({moreItemsLoading:!0},function(){e<=a.state.total&&(a.setState(function(t){return{hasNextPage:t.listItems.length<a.state.total,moreItemsLoading:!1,currentCount:e,item:Object(r.a)(t.listItems).concat(a.props.topFree)}}),a.props.loadDataThunk("top-free",e))})},a.updateSearch=function(e){a.setState({search:e.currentTarget.value.substr(0,20)})},a.state={search:"",total:100,currentCount:10,offset:10,listItems:[],moreItemsLoading:!1,hasNextPage:!0},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadDataThunk("top-free",10),this.props.loadDataThunk("top-grossing")}},{key:"render",value:function(){var e=this,t=this.props.topFree.filter(function(t){return t.trackName.toLowerCase().includes(e.state.search.toLowerCase())}),a=this.props.topGrossing.filter(function(t){return t.trackName.toLowerCase().includes(e.state.search.toLowerCase())}),r=t.map(function(e,t){return m.a.createElement(b,{key:t,artworkUrl100:e.artworkUrl100,trackName:e.trackName,genres:e.genres,averageUserRating:e.averageUserRating,userRatingCount:e.userRatingCount,index:t})}),n=a.map(function(e,t){return m.a.createElement(w,{key:t,artworkUrl100:e.artworkUrl100,trackName:e.trackName,genres:e.genres,index:t})}),s=this.props.topGrossing.map(function(e,t){return m.a.createElement(w,{key:t,artworkUrl100:e.artworkUrl100,trackName:e.trackName,genres:e.genres,index:t})});return m.a.createElement("div",{className:"main"},m.a.createElement("div",{className:"search-area"},m.a.createElement(u.a,null),m.a.createElement("input",{className:"search",value:this.state.search,onChange:this.updateSearch,placeholder:"\u641c\u5c0b"})),m.a.createElement("div",{className:"grossing-and-free"},m.a.createElement("h2",null," \u63a8\u4ecb "),m.a.createElement("div",{className:"top-grossing-section"},this.state.search?n:s),m.a.createElement("div",{className:"top-free"},this.state.search?r:m.a.createElement(U,{items:this.props.topFree,moreItemsLoading:this.state.moreItemsLoading,loadMoreItems:this.loadMore,hasNextPage:this.state.hasNextPage}))))}}]),t}(m.a.Component),R={loadDataThunk:function(e,t){return function(){var a=Object(h.a)(g.a.mark(function a(r){var n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v()("".concat("http://localhost:8000","/").concat(e,"/").concat(t?"".concat(t):"10"));case 2:(n=a.sent).data?r(Object(f.c)(n.data,e)):r(Object(f.b)("failed to fetch"));case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}};t.default=Object(p.b)(function(e){return{topFree:e.app.topFree,topGrossing:e.app.topGrossing}},R)(I)}}]);
//# sourceMappingURL=4.b1f927c0.chunk.js.map